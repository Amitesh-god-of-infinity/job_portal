{% load static %} 

{% include 'user_navigation.html' %}

<title>Apply for Job | Job Pulse</title>
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<link rel="stylesheet" href="{% static 'css/apply_now.css' %}">

<div class="apply-container">
    <div class="logo">
        <i class="fas fa-briefcase"></i>
        <h1>Job Pulse</h1>
        <p>Job Application</p>
    </div>

    <div class="welcome-message">
        <h2>Apply for This Position</h2>
        <p>Submit your application to join our team</p>
    </div>

    <form onsubmit="return validateForm();" name="apply" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-row">
            <div class="form-group">
                <label>First Name</label>
                <i class='bx bx-user input-icon'></i>
                <input type="text" class="input-field" value="{{user.first_name}}" name="fname" readonly>
            </div>

            <div class="form-group">
                <label>Last Name</label>
                <i class='bx bx-user input-icon'></i>
                <input type="text" class="input-field" value="{{user.last_name}}" name="lname" readonly>
            </div>
        </div>

        <div class="form-group">
            <label class="required-field">Contact Number</label>
            <i class='bx bx-phone input-icon'></i>
            <input type="text" class="input-field" id="contact" name="contact" placeholder="Enter 10-digit Phone Number" required>
            <div class="validation-error" id="contact-error">Please enter a valid 10-digit phone number</div>
            <div class="validation-success" id="contact-success">Valid phone number</div>
        </div>

        <div class="form-group">
            <label>Email Address</label>
            <i class='bx bx-envelope input-icon'></i>
            <input type="email" class="input-field" value="{{user.username}}" name="email" readonly>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Experience (Years)</label>
                <i class='bx bx-briefcase input-icon'></i>
                <input type="number" class="input-field" id="exp" name="exp" placeholder="Total Experience in years" min="0" max="50">
            </div>

            <div class="form-group">
                <label class="required-field">Qualification</label>
                <i class='bx bx-book input-icon'></i>
                <input type="text" class="input-field" id="que" name="que" placeholder="Your Qualification" required>
                <div class="validation-error" id="que-error">Please enter your qualification</div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label class="required-field">Gender</label>
                <div class="gender-group">
                    <div class="gender-options">
                        <div class="gender-option">
                            <input type="radio" id="customRadioInLine1" name="gender" value="Male" required>
                            <label for="customRadioInLine1">Male</label>
                        </div>
                        <div class="gender-option">
                            <input type="radio" id="customRadioInLine2" name="gender" value="Female" required>
                            <label for="customRadioInLine2">Female</label>
                        </div>
                    </div>
                </div>
                <div class="validation-error" id="gender-error">Please select your gender</div>
            </div>

            <div class="form-group">
                <label class="required-field">Profile image</label>
                <div class="file-input-container">
                    <div class="file-input-label">
                        <i class='bx bx-upload'></i>
                        <span>Upload your profile image(jpg, png)</span>
                    </div>
                    <input type="file" id="resume" name="image" accept=".pdf,.doc,.docx,image/*" required>
                </div>
                <div id="file-name" class="file-name"></div>
                <div class="validation-error" id="resume-error">Please select a valid file (JPEG, JPG, PNG)</div>
            </div>
        </div>
        
        <div class="btn-container">
            <button type="submit" class="btn-apply" id="submit-btn">
                <i class='bx bx-send'></i> Submit Application
            </button>
            
            <a href="{% url 'view_job_user' %}" class="btn-back">
                <i class='bx bx-arrow-back'></i> Back to Job Listings
            </a>
        </div>
    </form>
</div>

<script src="{% static 'js/apply_now.js' %}"></script>

{% if error == "no" %}
<script>
    alert("Applied Successfully");
    window.location = ('{% url 'view_job_user' %}');
</script>
{% endif %}

{% if error == "yes" %}
<script>
    alert("Something Went Wrong, Try Again...");
</script>
{% endif %}

{% include 'footer.html' %}