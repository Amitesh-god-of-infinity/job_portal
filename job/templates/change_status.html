{% load static %}

{% block body %}

{% include 'admin_navigation.html' %}

<title>Change Recruiter Status | Job Pulse Admin</title>
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

<link rel="stylesheet" href="{% static 'css/change_status.css' %}"> 

<div class="status-container">
    <div class="page-header">
        <i class="fas fa-user-cog"></i>
        <h1>Job Pulse Admin</h1>
        <p>Change Recruiter Status</p>
    </div>

    <div class="recruiter-info">
        <h3>Recruiter Information</h3>
        <div class="info-item">
            <span class="info-label">Name:</span>
            <span class="info-value">{{recuiter.user.first_name}} {{recuiter.user.last_name}}</span>
        </div>
        <div class="info-item">
            <span class="info-label">Email:</span>
            <span class="info-value">{{recuiter.user.username}}</span>
        </div>
        <div class="info-item">
            <span class="info-label">Company:</span>
            <span class="info-value">{{recuiter.company}}</span>
        </div>
        <div class="info-item">
            <span class="info-label">Current Status:</span>
            <span class="info-value">{{recuiter.status}}</span>
        </div>
    </div>

    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="uname">Recruiter Name:</label>
            <input type="text" class="form-control" id="uname" name="uname" value="{{recuiter.user.first_name}} {{recuiter.user.last_name}}" disabled>
        </div>
        
        <div class="form-group">
            <label for="status">Change Status:</label>
            <select class="form-control" id="status" name="status">
                <option value="Accept">Accept</option>
                <option value="Reject">Reject</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Update Status
        </button>
    </form>

    <a href="{% url 'recuiter_all' %}" class="btn-back">
        <i class="fas fa-arrow-left"></i> Back to Recruiters
    </a>
</div>

{% if error == "no" %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        Swal.fire({
            icon: 'success',
            title: 'Status Changed',
            text: 'Recruiter status has been updated successfully!',
            confirmButtonColor: '#6c5ce7',
            confirmButtonText: 'OK'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location = ('{% url 'recuiter_all' %}');
            }
        });
    });
</script>
{% endif %}

{% if error == "yes" %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        Swal.fire({
            icon: 'error',
            title: 'Error',
            text: 'Something went wrong. Please try again.',
            confirmButtonColor: '#6c5ce7',
            confirmButtonText: 'Try Again'
        });
    });
</script>
{% endif %}

{% include 'footer.html' %}

{% endblock %}